<!DOCTYPE html>
<html>
<head>
    <title>IIIF conditierapport{% if prefilled_data.title_nl is defined %} - {{ prefilled_data.title_nl }}{% endif %}</title>
    <link rel="stylesheet" href="{{ asset('css/styles.css') }}">
    <link rel="stylesheet" href="{{ asset('css/annotorious.min.css') }}">
    <script src="{{ asset('js/openseadragon.2.4.2.min.js') }}"></script>
    <script src="{{ asset('js/annotorious-selector-pack.min.js') }}"></script>
    <script src="{{ asset('js/openseadragon-annotorious.min.js') }}"></script>
</head>
<body>
{% include 'navbar.html.twig' %}
{% if readonly %}
    <div id="basic-info-form">
        {% include 'basic_info.twig' %}
    </div>
    <div id="actors-form">
        {% include 'actors.html.twig' %}
    </div>
    <div id="material-form">
        {% include 'material_construction.html.twig' %}
    </div>
    <div id="condition-form">
        {% include 'condition.html.twig' %}
    </div>
    <div id="annotate-form">
        {% include 'annotate.html.twig' %}
    </div>
{% else %}
    <script>
        const divIds = [
            'basic-info-form', 'actors-form', 'material-form', 'condition-form', 'annotate-form'
        ];
        function toggleField(hideObj, showObj) {
            hideObj.disabled = true;
            hideObj.style.display = 'none';
            showObj.disabled = false;
            showObj.style.display = 'inline';
            showObj.focus();
        }

        // Execute any functions that are to be loaded on page load
        // We have to do this for textareas whose height can only be dermined when visible
        function showDiv(showId) {
            for(var i = 0; i < divIds.length; i++) {
                if(divIds[i] != showId) {
                    var hideObj = document.getElementById(divIds[i]);
                    hideObj.style.position = 'absolute';
                    hideObj.style.top = '-9999px';
                    hideObj.style.left = '-9999px';
                }
            }
            var showObj = document.getElementById(showId);
            showObj.style.position = 'relative';
            showObj.style.top = '0';
            showObj.style.left = '0';
            if(typeof eventsToTrigger !== 'undefined') {
                for (var e in eventsToTrigger) {
                    eval(eventsToTrigger[e] + "()");
                }
            }
            console.log(showId);
            if(showId == 'annotate-form') {
                console.log("HIDE IT");
                document.getElementById('right-col').style.display = 'none';
            } else {
                console.log("SHOW IT");
                document.getElementById('right-col').style.display = 'inline-block';
            }
            window.scrollTo(0, 0);
        }
    </script>
    <form action="{{ path('save', { type: 'existing' }) }}" method="POST">
        <div id="wrap">
            <div id="left-col">
                <button type="button" onclick="showDiv('basic-info-form')">Basisinfo</button>
                <button type="button" onclick="showDiv('actors-form')">Actoren</button>
                <button type="button" onclick="showDiv('material-form')">Materialen</button>
                <button type="button" onclick="showDiv('condition-form')">Conditie</button>
                <button type="button" onclick="showDiv('annotate-form')">Annotaties</button>
            </div>
            <div id="middle-col">
                <div id="basic-info-form">
                    {% include 'basic_info.twig' %}
                    <div>
                        <div style="float:right;">
                            <button type="button" onclick="showDiv('actors-form')">Volgende</button>
                        </div>
                    </div>
                </div>
                <div id="actors-form" style="position: absolute; top: -9999px; left: -9999px;">
                    {% include 'actors.html.twig' %}
                    <div>
                        <div style="float:left;">
                            <button type="button" onclick="showDiv('basic-info-form')">Vorige</button>
                        </div>
                        <div style="float:right;">
                            <button type="button" onclick="showDiv('material-form')">Volgende</button>
                        </div>
                    </div>
                </div>
                <div id="material-form" style="position: absolute; top: -9999px; left: -9999px;">
                    {% include 'material_construction.html.twig' %}
                    <div>
                        <div style="float:left;">
                            <button type="button" onclick="showDiv('actors-form')">Vorige</button>
                        </div>
                        <div style="float:right;">
                            <button type="button" onclick="showDiv('condition-form')">Volgende</button>
                        </div>
                    </div>
                </div>
                <div id="condition-form" style="position: absolute; top: -9999px; left: -9999px;">
                    {% include 'condition.html.twig' %}
                    <div>
                        <div style="float:left;">
                            <button type="button" onclick="showDiv('material-form')">Vorige</button>
                        </div>
                        <div style="float:right;">
                            <button type="button" onclick="showDiv('annotate-form')">Volgende</button>
                        </div>
                    </div>
                </div>
                <div id="annotate-form" style="position: absolute; top: -9999px; left: -9999px;">
                    {% include 'annotate.html.twig' %}
                    <div>
                        <div style="float:left;">
                            <button type="button" onclick="showDiv('condition-form')">Vorige</button>
                        </div>
                        <div style="float:right;">
                            <input type="submit" value="Rapport verzenden">
                        </div>
                    </div>
                </div>
            </div>
            <div id="right-col">
                <div id="openseadragon-viewer" style="width: 640px; height: 480px;"></div>
            </div>
        </div>
    </form>
{% endif %}
{% include 'footer.html.twig' %}

{% set general_conditions = [ 'good', 'reasonable', 'bad', 'not transportable', 'not_displayable' ] %}
{% set has_general_condition = false %}
{% for general_condition in general_conditions %}
    {% if prefilled_data['general_condition' ~ general_condition] is defined %}
        {% set has_general_condition = true %}
    {% endif %}
{% endfor %}

{% set damages = [ 'surface_dirt', 'crusted_dirt', 'spots', 'fingerprints', 'old_restoration', 'salts', 'insect_damage', 'mold', 'water_damage',
    'corrosion', 'gaps', 'flaking', 'powdering', 'discolorations', 'wearage', 'scratches', 'twists', 'dents', 'structural_damage',
    'cracks', 'hair_tears', 'holes', 'wrinkled', 'delamination', 'missing_parts', 'removable_parts', 'brittle', 'custom' ] %}
{% set has_carrier_damage = false %}
{% set has_finish_layer_damage = false %}
{% for damage in damages %}
    {% if prefilled_data['carrier_damage_' ~ damage] is defined %}
        {% set has_carrier_damage = true %}
    {% endif %}
    {% if prefilled_data['finish_layer_damage_' ~ damage] is defined %}
        {% set has_finish_layer_damage = true %}
    {% endif %}
{% endfor %}

{% if not readonly or has_general_condition or has_carrier_damage or has_finish_layer_damage or prefilled_data.condition_specification is defined %}
    <h3>Conditie van het object</h3>
{% endif %}
{% if not readonly or has_general_condition %}
    <h4>Algemene conditie</h4>
    {% for general_condition in general_conditions %}
        <div>{% include 'checkbox.html.twig' with { 'name': 'general_condition_' ~ general_condition, 'label': general_condition | trans } %}</div>
    {% endfor %}
{% endif %}

{% if not readonly or has_carrier_damage or has_finish_layer_damage or prefilled_data.condition_specification is defined %}
    <h4>Specifieke toestand van het object</h4>
    {% if not readonly or has_carrier_damage %}
        <div class="half">
            <h4>Drager</h4>
            {% for damage in damages %}
                {% if damage == 'custom' %}
                    <div>{% include 'checkbox_custom.html.twig' with { 'name': 'carrier_damage_custom' } %}</div>
                {% else %}
                    <div>{% include 'checkbox.html.twig' with { 'name': 'carrier_damage_' ~ damage, 'label': damage | trans } %}</div>
                {% endif %}
            {% endfor %}
        </div>
    {% endif %}

    {% if not readonly or has_finish_layer_damage %}
        <div class="half">
            <h4>Afwerkingslaag</h4>
            {% for damage in damages %}
                {% if damage == 'custom' %}
                    <div>{% include 'checkbox_custom.html.twig' with { 'name': 'finish_layer_damage_custom' } %}</div>
                {% else %}
                    <div>{% include 'checkbox.html.twig' with { 'name': 'finish_layer_damage_' ~ damage, 'label': damage | trans } %}</div>
                {% endif %}
            {% endfor %}
        </div>
    {% endif %}

    {% include 'textarea.html.twig' with { 'name': 'condition_specification', 'label': 'Specificaties' } %}
{% endif %}

{% set conservation_treatments = [ 'removing_dust', 'superficial_cleaning', 'insect_repellent_treatment', 'removing_mold_spores', 'reinforcing',
                                    'regluing_loose_parts', 'fixating_loose_parts', 'stabilizing_socket', 'adding_protective_layer', 'adding_barcode', 'custom' ] %}
{% set has_conservation_treatment = false %}
{% for conservation_treatment in conservation_treatments %}
    {% if prefilled_data['conservation_treatment_' ~ conservation_treatment] is defined %}
        {% set has_conservation_treatment = true %}
    {% endif %}
{% endfor %}

{% set restoration_treatments = [ 'thorough_cleaning', 'local_cleaning', 'polychromy_research', 'reconstruction_of_original', 'remove_material_tension', 'removing_old_restoration',
                                  'replacing_construction', 'protective_layer', 'adding_fastening_system', 'retouching', 'filling_gap_elements', 'custom' ] %}
{% set has_restoration_treatment = false %}
{% for restoration_treatment in restoration_treatments %}
    {% if prefilled_data['restoration_treatment_' ~ restoration_treatment] is defined %}
        {% set has_restoration_treatment = true %}
    {% endif %}
{% endfor %}

{% set researches = [ 'setup_method', 'material_technical_research', 'analysis', 'necessary_background_information', 'custom' ] %}
{% set has_research_needed = false %}
{% for research in researches %}
    {% if prefilled_data['research_needed_' ~ research] is defined %}
        {% set has_research_needed = true %}
    {% endif %}
{% endfor %}

{% if not readonly or prefilled_data.conservation_before_transport_yes is defined or prefilled_data.conservation_before_transport_no is defined
    or has_conservation_treatment or has_restoration_treatment or has_research_needed %}
    <h3>Conservatie</h3>
{% endif %}

{% if not readonly or prefilled_data.conservation_before_transport_yes is defined or prefilled_data.conservation_before_transport_no is defined %}
    <h4>Conservering voor transport nodig</h4>
    <div>{% include 'checkbox.html.twig' with { 'name': 'conservation_before_transport_yes', 'label': 'Ja' } %}</div>
    <div>{% include 'checkbox.html.twig' with { 'name': 'conservation_before_transport_no', 'label': 'Nee' } %}</div>
{% endif %}

{% if not readonly or has_conservation_treatment %}
    <h4>Conservatiebehandeling</h4>
    <div><p>Urgentiegraad (zeer urgent) 1 - 2 - 3 (weinig urgent)</p></div>
    {% for conservation_treatment in conservation_treatments %}
        {% if conservation_treatment == 'custom' %}
            <div>{% include 'checkbox_conservation_custom.html.twig' with { 'name': 'conservation_treatment_custom', 'label': 'Andere' } %}</div>
        {% else %}
            <div>{% include 'checkbox_conservation.html.twig' with { 'name': 'conservation_treatment_' ~ conservation_treatment, 'label': conservation_treatment | trans } %}</div>
        {% endif %}
    {% endfor %}
    <div>{% include 'number.html.twig' with { 'name': 'conservation_treatment_hours', 'label': 'Schatting werkuren' } %}</div>
{% endif %}

{% if not readonly or has_restoration_treatment %}
    <h4>Restauratiebehandeling</h4>
    <div><p>Urgentiegraad (zeer urgent) 1 - 2 - 3 (weinig urgent)</p></div>
    {% for restoration_treatment in restoration_treatments %}
        {% if restoration_treatment == 'custom' %}
            <div>{% include 'checkbox_conservation_custom.html.twig' with { 'name': 'restoration_treatment_custom', 'label': 'Andere' } %}</div>
        {% else %}
            <div>{% include 'checkbox_conservation.html.twig' with { 'name': 'restoration_treatment_' ~ restoration_treatment, 'label': restoration_treatment | trans } %}</div>
        {% endif %}
    {% endfor %}
    <div>{% include 'number.html.twig' with { 'name': 'restoration_treatment_hours', 'label': 'Schatting werkuren' } %}</div>
{% endif %}

{% if not readonly or has_research_needed %}
    <h4>Verder onderzoek nodig</h4>
    {% for research in researches %}
        {% if research == 'custom' %}
            <div>{% include 'checkbox_custom.html.twig' with { 'name': 'research_needed_custom', 'label': 'Andere' } %}</div>
        {% else %}
            <div>{% include 'checkbox_custom.html.twig' with { 'name': 'research_needed_' ~ research, 'label': research | trans } %}</div>
        {% endif %}
    {% endfor %}
{% endif %}
